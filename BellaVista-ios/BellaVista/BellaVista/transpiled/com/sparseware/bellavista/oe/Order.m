//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: com/sparseware/bellavista/oe/Order.java
//
//  Created by decoteaud on 3/14/16.
//

#include "IOSClass.h"
#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/ui/RenderableDataItem.h"
#include "com/appnativa/rare/ui/iPlatformIcon.h"
#include "com/appnativa/util/CharArray.h"
#include "com/appnativa/util/json/JSONObject.h"
#include "com/sparseware/bellavista/Orders.h"
#include "com/sparseware/bellavista/oe/FieldValue.h"
#include "com/sparseware/bellavista/oe/Order.h"
#include "com/sparseware/bellavista/oe/OrderFields.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/util/Iterator.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

@implementation CCPBVOrder

- (id)initWithNSString:(NSString *)orderType
withCCPBVOrder_ActionTypeEnum:(CCPBVOrder_ActionTypeEnum *)actionType
          withNSString:(NSString *)orderID
          withNSString:(NSString *)orderName {
  return [self initCCPBVOrderWithNSString:orderType withCCPBVOrder_ActionTypeEnum:actionType withRARERenderableDataItem:[[RARERenderableDataItem alloc] initWithNSString:orderName withId:orderID]];
}

- (id)initCCPBVOrderWithNSString:(NSString *)orderType
   withCCPBVOrder_ActionTypeEnum:(CCPBVOrder_ActionTypeEnum *)actionType
      withRARERenderableDataItem:(RARERenderableDataItem *)item {
  if (self = [super init]) {
    self->orderType_ = orderType;
    self->actionType_ = actionType;
    orderedItem_ = item;
    directionsItem_ = [[RARERenderableDataItem alloc] init];
  }
  return self;
}

- (id)initWithNSString:(NSString *)orderType
withCCPBVOrder_ActionTypeEnum:(CCPBVOrder_ActionTypeEnum *)actionType
withRARERenderableDataItem:(RARERenderableDataItem *)item {
  return [self initCCPBVOrderWithNSString:orderType withCCPBVOrder_ActionTypeEnum:actionType withRARERenderableDataItem:item];
}

- (NSString *)getOrderedItemID {
  return (NSString *) check_class_cast([((RARERenderableDataItem *) nil_chk(orderedItem_)) getLinkedData], [NSString class]);
}

+ (CCPBVOrder *)createDiscontinuedOrderWithRARERenderableDataItem:(RARERenderableDataItem *)selectedItem
                                             withCCPBVOrderFields:(CCPBVOrderFields *)fields
                                                  withJavaUtilMap:(id<JavaUtilMap>)values {
  NSString *type = [((RARERenderableDataItem *) nil_chk([((RARERenderableDataItem *) nil_chk(selectedItem)) getWithInt:0])) itemsToString];
  CCPBVOrder *o = [[CCPBVOrder alloc] initWithNSString:type withCCPBVOrder_ActionTypeEnum:[CCPBVOrder_ActionTypeEnum DISCONTINUED] withRARERenderableDataItem:[((RARERenderableDataItem *) nil_chk([selectedItem getWithInt:1])) copy__]];
  o->linkedOrderID_ = (NSString *) check_class_cast([((RARERenderableDataItem *) nil_chk([selectedItem getWithInt:0])) getLinkedData], [NSString class]);
  [((RARERenderableDataItem *) nil_chk(o->directionsItem_)) setValueWithId:[CCPBVOrders getOrderDirectionsWithRARERenderableDataItem:selectedItem]];
  o->orderFields_ = fields;
  o->orderValues_ = values;
  o->complete_ = YES;
  return o;
}

- (id<RAREiPlatformIcon>)getActionTypeIcon {
  if (documentIcon_ == nil) {
    discontinueIcon_ = [RAREPlatform getResourceAsIconWithNSString:@"bv.icon.order_discontinued"];
    documentIcon_ = [RAREPlatform getResourceAsIconWithNSString:@"bv.icon.order_complete"];
    documentIncompleteIcon_ = [RAREPlatform getResourceAsIconWithNSString:@"bv.icon.order_incomplete"];
  }
  switch ([actionType_ ordinal]) {
    case CCPBVOrder_ActionType_DISCONTINUED:
    return discontinueIcon_;
    default:
    return complete_ ? documentIcon_ : documentIncompleteIcon_;
  }
}

- (void)updateDirectionsItem {
  if (actionType_ != [CCPBVOrder_ActionTypeEnum DISCONTINUED]) {
    [self updateValuesWithJavaUtilMap:orderValues_ withRAREUTCharArray:nil];
  }
}

- (id<JavaUtilMap>)copyValues {
  if (orderValues_ == nil) {
    return nil;
  }
  else {
    JavaUtilLinkedHashMap *values = [[JavaUtilLinkedHashMap alloc] initWithJavaUtilMap:orderValues_];
    id<JavaUtilIterator> it = [((id<JavaUtilSet>) nil_chk([values entrySet])) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      id<JavaUtilMap_Entry> e = [it next];
      (void) [e setValueWithId:[((CCPBVFieldValue *) nil_chk([((id<JavaUtilMap_Entry>) nil_chk(e)) getValue])) copy__]];
    }
    return values;
  }
}

- (void)updateValuesWithJavaUtilMap:(id<JavaUtilMap>)values
                withRAREUTCharArray:(RAREUTCharArray *)ca {
  self->orderValues_ = values;
  if (ca == nil) {
    ca = [[RAREUTCharArray alloc] init];
  }
  id<JavaUtilList> list = [((CCPBVOrderFields *) nil_chk(orderFields_)) getFields];
  for (RAREUTJSONObject * __strong o in nil_chk(list)) {
    NSString *id_ = [CCPBVOrderFields getIDWithRAREUTJSONObject:o withBoolean:YES];
    if (![((RAREUTJSONObject *) nil_chk(o)) optBooleanWithNSString:[CCPBVOrderFields INPREVIEW]]) {
      continue;
    }
    if (id_ != nil) {
      CCPBVFieldValue *item = [((id<JavaUtilMap>) nil_chk(values)) getWithId:id_];
      if (item != nil && item->value_ != nil) {
        NSString *s = [o optStringWithNSString:[CCPBVOrderFields PREVIEW_PREFIX] withNSString:nil];
        if (s != nil) {
          (void) [((RAREUTCharArray *) nil_chk(ca)) appendWithNSString:s];
        }
        (void) [((RAREUTCharArray *) nil_chk(ca)) appendWithNSString:[item description]];
        s = [o optStringWithNSString:[CCPBVOrderFields PREVIEW_SUFFIX] withNSString:nil];
        if (s != nil) {
          (void) [ca appendWithNSString:s];
        }
        (void) [ca appendWithNSString:@", "];
      }
    }
  }
  if (((RAREUTCharArray *) nil_chk(ca))->_length_ > 2) {
    ca->_length_ -= 2;
  }
  [((RARERenderableDataItem *) nil_chk(directionsItem_)) setValueWithId:[ca description]];
}

- (BOOL)isComplete {
  return complete_;
}

- (void)setCompleteWithBoolean:(BOOL)complete {
  self->complete_ = complete;
}

- (BOOL)isDirty {
  return dirty_;
}

- (void)setDirtyWithBoolean:(BOOL)dirty {
  self->dirty_ = dirty;
}

- (void)copyAllFieldsTo:(CCPBVOrder *)other {
  [super copyAllFieldsTo:other];
  other->actionType_ = actionType_;
  other->complete_ = complete_;
  other->directionsItem_ = directionsItem_;
  other->dirty_ = dirty_;
  other->discontinueIcon_ = discontinueIcon_;
  other->documentIcon_ = documentIcon_;
  other->documentIncompleteIcon_ = documentIncompleteIcon_;
  other->linkedOrderID_ = linkedOrderID_;
  other->orderFields_ = orderFields_;
  other->orderID_ = orderID_;
  other->orderType_ = orderType_;
  other->orderValues_ = orderValues_;
  other->orderedItem_ = orderedItem_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "getOrderedItemID", NULL, "LNSString", 0x1, NULL },
    { "createDiscontinuedOrderWithRARERenderableDataItem:withCCPBVOrderFields:withJavaUtilMap:", NULL, "LCCPBVOrder", 0x9, NULL },
    { "getActionTypeIcon", NULL, "LRAREiPlatformIcon", 0x1, NULL },
    { "copyValues", NULL, "LJavaUtilMap", 0x1, NULL },
    { "isComplete", NULL, "Z", 0x1, NULL },
    { "isDirty", NULL, "Z", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "orderType_", NULL, 0x1, "LNSString" },
    { "actionType_", NULL, 0x1, "LCCPBVOrder_ActionTypeEnum" },
    { "orderID_", NULL, 0x1, "LNSString" },
    { "linkedOrderID_", NULL, 0x1, "LNSString" },
    { "orderedItem_", NULL, 0x1, "LRARERenderableDataItem" },
    { "directionsItem_", NULL, 0x1, "LRARERenderableDataItem" },
    { "orderValues_", NULL, 0x1, "LJavaUtilMap" },
    { "orderFields_", NULL, 0x1, "LCCPBVOrderFields" },
    { "complete_", NULL, 0x4, "Z" },
  };
  static J2ObjcClassInfo _CCPBVOrder = { "Order", "com.sparseware.bellavista.oe", NULL, 0x1, 6, methods, 9, fields, 0, NULL};
  return &_CCPBVOrder;
}

@end

static CCPBVOrder_ActionTypeEnum *CCPBVOrder_ActionTypeEnum_NEW;
static CCPBVOrder_ActionTypeEnum *CCPBVOrder_ActionTypeEnum_DISCONTINUED;
static CCPBVOrder_ActionTypeEnum *CCPBVOrder_ActionTypeEnum_RENEWED;
IOSObjectArray *CCPBVOrder_ActionTypeEnum_values;

@implementation CCPBVOrder_ActionTypeEnum

+ (CCPBVOrder_ActionTypeEnum *)NEW {
  return CCPBVOrder_ActionTypeEnum_NEW;
}
+ (CCPBVOrder_ActionTypeEnum *)DISCONTINUED {
  return CCPBVOrder_ActionTypeEnum_DISCONTINUED;
}
+ (CCPBVOrder_ActionTypeEnum *)RENEWED {
  return CCPBVOrder_ActionTypeEnum_RENEWED;
}

- (id)copyWithZone:(NSZone *)zone {
  return self;
}

- (id)initWithNSString:(NSString *)__name withInt:(int)__ordinal {
  return [super initWithNSString:__name withInt:__ordinal];
}

+ (void)initialize {
  if (self == [CCPBVOrder_ActionTypeEnum class]) {
    CCPBVOrder_ActionTypeEnum_NEW = [[CCPBVOrder_ActionTypeEnum alloc] initWithNSString:@"NEW" withInt:0];
    CCPBVOrder_ActionTypeEnum_DISCONTINUED = [[CCPBVOrder_ActionTypeEnum alloc] initWithNSString:@"DISCONTINUED" withInt:1];
    CCPBVOrder_ActionTypeEnum_RENEWED = [[CCPBVOrder_ActionTypeEnum alloc] initWithNSString:@"RENEWED" withInt:2];
    CCPBVOrder_ActionTypeEnum_values = [[IOSObjectArray alloc] initWithObjects:(id[]){ CCPBVOrder_ActionTypeEnum_NEW, CCPBVOrder_ActionTypeEnum_DISCONTINUED, CCPBVOrder_ActionTypeEnum_RENEWED, nil } count:3 type:[IOSClass classWithClass:[CCPBVOrder_ActionTypeEnum class]]];
  }
}

+ (IOSObjectArray *)values {
  return [IOSObjectArray arrayWithArray:CCPBVOrder_ActionTypeEnum_values];
}

+ (CCPBVOrder_ActionTypeEnum *)valueOfWithNSString:(NSString *)name {
  for (int i = 0; i < [CCPBVOrder_ActionTypeEnum_values count]; i++) {
    CCPBVOrder_ActionTypeEnum *e = CCPBVOrder_ActionTypeEnum_values->buffer_[i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:name];
  return nil;
}

+ (J2ObjcClassInfo *)__metadata {
  static const char *superclass_type_args[] = {"LCCPBVOrder_ActionTypeEnum"};
  static J2ObjcClassInfo _CCPBVOrder_ActionTypeEnum = { "ActionType", "com.sparseware.bellavista.oe", "Order", 0x4019, 0, NULL, 0, NULL, 1, superclass_type_args};
  return &_CCPBVOrder_ActionTypeEnum;
}

@end
