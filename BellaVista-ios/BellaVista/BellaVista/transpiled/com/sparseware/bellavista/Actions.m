//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: com/sparseware/bellavista/Actions.java
//
//  Created by decoteaud on 5/11/15.
//

#include "IOSClass.h"
#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/iPlatform.h"
#include "com/appnativa/rare/iPlatformAppContext.h"
#include "com/appnativa/rare/ui/ActionBar.h"
#include "com/appnativa/rare/ui/UIAction.h"
#include "com/appnativa/rare/ui/UIImageIcon.h"
#include "com/appnativa/rare/ui/UIScreen.h"
#include "com/appnativa/rare/ui/event/ActionEvent.h"
#include "com/appnativa/rare/ui/event/iActionListener.h"
#include "com/appnativa/rare/ui/iPlatformIcon.h"
#include "com/appnativa/rare/viewer/SplitPaneViewer.h"
#include "com/appnativa/rare/viewer/WindowViewer.h"
#include "com/appnativa/rare/viewer/iTarget.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/sparseware/bellavista/Actions.h"
#include "com/sparseware/bellavista/PatientSelect.h"
#include "com/sparseware/bellavista/Utils.h"
#include "java/lang/CharSequence.h"
#include "java/lang/Exception.h"
#include "java/util/EventObject.h"

@implementation CCPBVActions

- (id)init {
  return [super init];
}

- (void)onEventWithNSString:(NSString *)eventName
            withRAREiWidget:(id<RAREiWidget>)widget
    withJavaUtilEventObject:(JavaUtilEventObject *)event {
}

- (void)onExitWithNSString:(NSString *)eventName
           withRAREiWidget:(id<RAREiWidget>)widget
   withJavaUtilEventObject:(JavaUtilEventObject *)event {
  [CCPBVUtils exit];
}

- (void)onPreferencesWithNSString:(NSString *)eventName
                  withRAREiWidget:(id<RAREiWidget>)widget
          withJavaUtilEventObject:(JavaUtilEventObject *)event {
  [CCPBVUtils showDialogWithNSString:@"/settings.rml" withBoolean:NO withBoolean:NO];
}

- (void)onLockWithNSString:(NSString *)eventName
           withRAREiWidget:(id<RAREiWidget>)widget
   withJavaUtilEventObject:(JavaUtilEventObject *)event {
  [CCPBVUtils lockApplicationWithBoolean:NO];
}

- (void)onChangePatientWithNSString:(NSString *)eventName
                    withRAREiWidget:(id<RAREiWidget>)widget
            withJavaUtilEventObject:(JavaUtilEventObject *)event {
  [CCPBVPatientSelect changePatientWithRAREiWidget:widget withCCPBVActionPath:nil];
}

- (void)onFlagsWithNSString:(NSString *)eventName
            withRAREiWidget:(id<RAREiWidget>)widget
    withJavaUtilEventObject:(JavaUtilEventObject *)event {
  @try {
    if ([RAREUIScreen isLargeScreen]) {
      (void) [((RAREWindowViewer *) nil_chk([RAREPlatform getWindowViewer])) openDialogWithNSString:@"/flags.rml"];
    }
    else {
      [CCPBVUtils pushWorkspaceViewerWithNSString:@"/flags.rml"];
    }
  }
  @catch (JavaLangException *e) {
    [CCPBVUtils handleErrorWithJavaLangThrowable:e];
  }
}

- (void)onConfigureFullscreenWithNSString:(NSString *)eventName
                          withRAREiWidget:(id<RAREiWidget>)widget
                  withJavaUtilEventObject:(JavaUtilEventObject *)event {
  if (![RAREUIScreen isLargeScreen]) {
    [((id<RAREiWidget>) nil_chk(widget)) setIconWithRAREiPlatformIcon:[RAREPlatform getResourceAsIconWithNSString:@"bv.icon.shrink"]];
  }
}

- (void)onFullscreenWithNSString:(NSString *)eventName
                 withRAREiWidget:(id<RAREiWidget>)widget
         withJavaUtilEventObject:(JavaUtilEventObject *)event {
  id l = [((id<RAREiWidget>) nil_chk(widget)) getLinkedData];
  if ([l conformsToProtocol: @protocol(RAREiActionListener)]) {
    [((id<RAREiActionListener>) check_protocol_cast(l, @protocol(RAREiActionListener))) actionPerformedWithRAREActionEvent:(RAREActionEvent *) check_class_cast(event, [RAREActionEvent class])];
    return;
  }
  if (![RAREUIScreen isLargeScreen]) {
    [CCPBVUtils popWorkspaceViewer];
  }
  else {
    RARESplitPaneViewer *sp = [CCPBVUtils getSplitPaneViewerWithRAREiWidget:widget];
    if (sp == nil) {
      return;
    }
    RAREWindowViewer *w = [RAREPlatform getWindowViewer];
    RAREActionBar *ab = [((RAREWindowViewer *) nil_chk(w)) getActionBar];
    RAREUIImageIcon *fullscreen = [w getResourceIconWithNSString:@"bv.icon.fullscreen"];
    RAREUIImageIcon *shrink = [w getResourceIconWithNSString:@"bv.icon.shrink"];
    RAREUIAction *action = [w getActionWithNSString:@"bv.action.fullscreen"];
    if ([((RAREUIAction *) nil_chk(action)) getIcon] == fullscreen) {
      [action setIconWithRAREiPlatformIcon:shrink];
      [((RARESplitPaneViewer *) nil_chk(sp)) setRegionVisibleWithInt:0 withBoolean:NO];
      [((id<RAREiTarget>) nil_chk([w getTargetWithNSString:@"patient_info"])) setVisibleWithBoolean:NO];
      [((RAREActionBar *) nil_chk(ab)) setTitleWithJavaLangCharSequence:(id<JavaLangCharSequence>) check_protocol_cast([((id<RAREiPlatformAppContext>) nil_chk([w getAppContext])) getDataWithId:@"pt_name"], @protocol(JavaLangCharSequence))];
    }
    else {
      if (![((id<RAREiPlatform>) nil_chk([RAREPlatform getPlatform])) isDesktop]) {
        [RAREPlatform setUseFullScreenWithBoolean:NO];
      }
      [action setIconWithRAREiPlatformIcon:fullscreen];
      [((id<RAREiTarget>) nil_chk([w getTargetWithNSString:@"patient_info"])) setVisibleWithBoolean:YES];
      [((RARESplitPaneViewer *) nil_chk(sp)) setRegionVisibleWithInt:0 withBoolean:YES];
      [((RAREActionBar *) nil_chk(ab)) setTitleWithJavaLangCharSequence:[w getTitle]];
    }
  }
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcClassInfo _CCPBVActions = { "Actions", "com.sparseware.bellavista", NULL, 0x1, 0, NULL, 0, NULL, 0, NULL};
  return &_CCPBVActions;
}

@end
