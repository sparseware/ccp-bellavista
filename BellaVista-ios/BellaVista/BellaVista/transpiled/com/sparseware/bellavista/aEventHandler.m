//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: com/sparseware/bellavista/aEventHandler.java
//
//  Created by decoteaud on 2/17/16.
//

#include "com/appnativa/rare/Platform.h"
#include "com/appnativa/rare/iCancelableFuture.h"
#include "com/appnativa/rare/iPlatformAppContext.h"
#include "com/appnativa/rare/iWorkerTask.h"
#include "com/appnativa/rare/net/ActionLink.h"
#include "com/appnativa/rare/viewer/WindowViewer.h"
#include "com/appnativa/rare/widget/aWidget.h"
#include "com/appnativa/rare/widget/iWidget.h"
#include "com/sparseware/bellavista/Utils.h"
#include "com/sparseware/bellavista/aEventHandler.h"
#include "java/lang/Exception.h"
#include "java/util/EventObject.h"
#include "java/util/List.h"

@implementation CCPBVaEventHandler

- (id)init {
  return [super init];
}

- (void)onEventWithNSString:(NSString *)eventName
            withRAREiWidget:(id<RAREiWidget>)widget
    withJavaUtilEventObject:(JavaUtilEventObject *)event {
}

- (void)connecting {
}

- (void)widgetDisposed {
}

- (void)errorOccuredWithJavaLangException:(JavaLangException *)e {
  [CCPBVUtils handleErrorWithJavaLangThrowable:e];
}

- (void)parseDataURLWithRAREaWidget:(RAREaWidget *)widget
                       withNSString:(NSString *)href
                        withBoolean:(BOOL)rowInfo
                        withBoolean:(BOOL)tabular {
  RAREActionLink *link = [CCPBVUtils createLinkWithRAREiWidget:widget withNSString:href withBoolean:rowInfo];
  [self parseDataURLWithRAREaWidget:widget withRAREActionLink:link withBoolean:tabular];
}

- (void)parseDataURLWithRAREaWidget:(RAREaWidget *)widget
                 withRAREActionLink:(RAREActionLink *)link
                        withBoolean:(BOOL)tabular {
  RAREWindowViewer *w = [RAREPlatform getWindowViewer];
  id<RAREiWorkerTask> task = [[CCPBVaEventHandler_$1 alloc] initWithCCPBVaEventHandler:self withRAREaWidget:widget withRAREActionLink:link withBoolean:tabular withRAREWindowViewer:w];
  (void) [((id<RAREiPlatformAppContext>) nil_chk([((RAREWindowViewer *) nil_chk(w)) getAppContext])) executeWorkerTaskWithRAREiWorkerTask:task];
  [w showWaitCursor];
}

- (void)dataParsedWithRAREiWidget:(id<RAREiWidget>)widget
                 withJavaUtilList:(id<JavaUtilList>)rows
               withRAREActionLink:(RAREActionLink *)link {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "connecting", NULL, "V", 0x4, NULL },
    { "widgetDisposed", NULL, "V", 0x4, NULL },
    { "errorOccuredWithJavaLangException:", NULL, "V", 0x4, NULL },
    { "dataParsedWithRAREiWidget:withJavaUtilList:withRAREActionLink:", NULL, "V", 0x404, NULL },
  };
  static J2ObjcClassInfo _CCPBVaEventHandler = { "aEventHandler", "com.sparseware.bellavista", NULL, 0x401, 4, methods, 0, NULL, 0, NULL};
  return &_CCPBVaEventHandler;
}

@end
@implementation CCPBVaEventHandler_$1

- (id)compute {
  @try {
    if ([((RAREaWidget *) nil_chk(val$widget_)) isDisposed]) {
      return nil;
    }
    [this$0_ connecting];
    return [val$widget_ parseDataLinkWithRAREActionLink:val$link_ withBoolean:val$tabular_];
  }
  @catch (JavaLangException *ex) {
    return ex;
  }
}

- (void)finishWithId:(id)result {
  [((RAREWindowViewer *) nil_chk(val$w_)) hideWaitCursor];
  if ([((RAREaWidget *) nil_chk(val$widget_)) isDisposed]) {
    [this$0_ widgetDisposed];
    return;
  }
  if ([result isKindOfClass:[JavaLangException class]]) {
    [this$0_ errorOccuredWithJavaLangException:(JavaLangException *) check_class_cast(result, [JavaLangException class])];
    return;
  }
  [this$0_ dataParsedWithRAREiWidget:val$widget_ withJavaUtilList:(id<JavaUtilList>) check_protocol_cast(result, @protocol(JavaUtilList)) withRAREActionLink:val$link_];
}

- (id)initWithCCPBVaEventHandler:(CCPBVaEventHandler *)outer$
                 withRAREaWidget:(RAREaWidget *)capture$0
              withRAREActionLink:(RAREActionLink *)capture$1
                     withBoolean:(BOOL)capture$2
            withRAREWindowViewer:(RAREWindowViewer *)capture$3 {
  this$0_ = outer$;
  val$widget_ = capture$0;
  val$link_ = capture$1;
  val$tabular_ = capture$2;
  val$w_ = capture$3;
  return [super init];
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "compute", NULL, "LNSObject", 0x1, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "LCCPBVaEventHandler" },
    { "val$widget_", NULL, 0x1012, "LRAREaWidget" },
    { "val$link_", NULL, 0x1012, "LRAREActionLink" },
    { "val$tabular_", NULL, 0x1012, "Z" },
    { "val$w_", NULL, 0x1012, "LRAREWindowViewer" },
  };
  static J2ObjcClassInfo _CCPBVaEventHandler_$1 = { "$1", "com.sparseware.bellavista", "aEventHandler", 0x8000, 1, methods, 5, fields, 0, NULL};
  return &_CCPBVaEventHandler_$1;
}

@end
