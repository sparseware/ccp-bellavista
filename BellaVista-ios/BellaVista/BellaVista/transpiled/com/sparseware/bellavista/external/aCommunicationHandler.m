//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: com/sparseware/bellavista/external/aCommunicationHandler.java
//
//  Created by decoteaud on 3/12/15.
//

#include "IOSClass.h"
#include "com/appnativa/util/IdentityArrayList.h"
#include "com/sparseware/bellavista/external/aCommunicationHandler.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/util/Collection.h"
#include "java/util/HashMap.h"
#include "java/util/HashSet.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

@implementation ComSparsewareBellavistaExternalaCommunicationHandler

- (id)init {
  return [super init];
}

- (void)addStatusListenerWithJavaUtilList:(id<JavaUtilList>)users
withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:(id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>)listener {
  int len = [((id<JavaUtilList>) nil_chk(users)) size];
  if (listenerMap_ == nil && len > 0) {
    listenerMap_ = [[JavaUtilHashMap alloc] initWithInt:len > 10 ? len : 10];
  }
  for (int i = 0; i < len; i++) {
    NSString *id_ = [users getWithInt:i];
    [self addStatusListenerWithNSString:id_ withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:listener];
  }
}

- (void)changeLocalUserStatusWithNSString:(NSString *)user
withComSparsewareBellavistaExternalaCommunicationHandler_UserStatus:(ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus *)status {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus *)getUserStatusWithNSString:(NSString *)user {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)initiateAudioChatWithNSString:(NSString *)user {
}

- (void)initiateTextChatWithNSString:(NSString *)user {
}

- (void)initiateVideoChatWithNSString:(NSString *)user {
}

- (BOOL)isAudioChatAvailable {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (BOOL)isTextChatAvailable {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (BOOL)isVideoChatAvailable {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (void)removeStatusListenerWithComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:(id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>)listener {
  if (listenerMap_ != nil) {
    id<JavaUtilIterator> it = [((id<JavaUtilSet>) nil_chk([listenerMap_ entrySet])) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      id<JavaUtilMap_Entry> e = [it next];
      id o = [((id<JavaUtilMap_Entry>) nil_chk(e)) getValue];
      if (o == listener) {
        [it remove];
        [self unregisterInterestWithNSString:[e getKey]];
      }
      else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
        id<JavaUtilList> list = (id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList));
        [((id<JavaUtilList>) nil_chk(list)) removeWithId:listener];
        if ([list isEmpty]) {
          [it remove];
          [self unregisterInterestWithNSString:[e getKey]];
        }
      }
    }
  }
}

- (void)removeStatusListenerWithJavaUtilList:(id<JavaUtilList>)users
withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:(id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>)listener {
  if (listenerMap_ != nil) {
    int len = [((id<JavaUtilList>) nil_chk(users)) size];
    for (int i = 0; i < len; i++) {
      NSString *id_ = [users getWithInt:i];
      [self removeStatusListenerWithNSString:id_ withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:listener];
    }
  }
}

- (void)addStatusListenerWithNSString:(NSString *)user
withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:(id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>)listener {
  if (listenerMap_ == nil) {
    id o = [((id<JavaUtilMap>) nil_chk(listenerMap_)) getWithId:user];
    if (o == listener) {
      return;
    }
    else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
      if ([((id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList))) indexOfWithId:listener] != -1) {
        return;
      }
    }
    if (o == nil) {
      (void) [listenerMap_ putWithId:user withId:listener];
    }
    else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
      [((id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList))) addWithId:listener];
    }
    else {
      RAREUTIdentityArrayList *list = [[RAREUTIdentityArrayList alloc] initWithInt:2];
      [list addWithId:o];
      [list addWithId:listener];
      (void) [listenerMap_ putWithId:user withId:list];
    }
    [self registerInterestWithNSString:user withBoolean:o != nil];
  }
}

- (void)notifyListenersWithJavaUtilMap:(id<JavaUtilMap>)statuses {
  if (listenerMap_ != nil) {
    id<JavaUtilMap> listeners = listenerMap_;
    id<JavaUtilIterator> it = [((id<JavaUtilSet>) nil_chk([((id<JavaUtilMap>) nil_chk(statuses)) entrySet])) iterator];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      id<JavaUtilMap_Entry> e = [it next];
      NSString *user = [((id<JavaUtilMap_Entry>) nil_chk(e)) getKey];
      ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus *status = [e getValue];
      id o = [listeners getWithId:user];
      if ([o conformsToProtocol: @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener)]) {
        [((id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) check_protocol_cast(o, @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener))) statusChangedWithComSparsewareBellavistaExternalaCommunicationHandler:self withNSString:user withComSparsewareBellavistaExternalaCommunicationHandler_UserStatus:status];
      }
      else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
        id<JavaUtilList> list = (id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList));
        int len = [((id<JavaUtilList>) nil_chk(list)) size];
        for (int i = 0; i < len; i++) {
          [((id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) check_protocol_cast([list getWithInt:i], @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener))) statusChangedWithComSparsewareBellavistaExternalaCommunicationHandler:self withNSString:user withComSparsewareBellavistaExternalaCommunicationHandler_UserStatus:status];
        }
      }
    }
  }
}

- (void)notifyOfServiceAvailabilityChange {
  if (listenerMap_ != nil) {
    id<JavaUtilIterator> it = [((id<JavaUtilCollection>) nil_chk([listenerMap_ values])) iterator];
    JavaUtilHashSet *notified = [[JavaUtilHashSet alloc] init];
    while ([((id<JavaUtilIterator>) nil_chk(it)) hasNext]) {
      id o = [it next];
      if ([o conformsToProtocol: @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener)]) {
        id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener> l = (id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) check_protocol_cast(o, @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener));
        if ([notified addWithId:l]) {
          [((id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) nil_chk(l)) serviceAvailbilityChangedWithComSparsewareBellavistaExternalaCommunicationHandler:self];
        }
      }
      else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
        id<JavaUtilList> list = (id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList));
        int len = [((id<JavaUtilList>) nil_chk(list)) size];
        for (int i = 0; i < len; i++) {
          id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener> l = (id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) check_protocol_cast([list getWithInt:i], @protocol(ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener));
          if ([notified addWithId:l]) {
            [((id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>) nil_chk(l)) serviceAvailbilityChangedWithComSparsewareBellavistaExternalaCommunicationHandler:self];
          }
        }
      }
    }
  }
}

- (void)registerInterestWithNSString:(NSString *)user
                         withBoolean:(BOOL)previouslyRegistered {
}

- (void)removeStatusListenerWithNSString:(NSString *)user
withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:(id<ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener>)listener {
  if (listenerMap_ == nil) {
    id o = [((id<JavaUtilMap>) nil_chk(listenerMap_)) getWithId:user];
    if (o == listener) {
      (void) [listenerMap_ removeWithId:user];
      [self unregisterInterestWithNSString:user];
    }
    else if ([o conformsToProtocol: @protocol(JavaUtilList)]) {
      id<JavaUtilList> list = (id<JavaUtilList>) check_protocol_cast(o, @protocol(JavaUtilList));
      [((id<JavaUtilList>) nil_chk(list)) removeWithId:listener];
      if ([list isEmpty]) {
        (void) [listenerMap_ removeWithId:user];
        [self unregisterInterestWithNSString:user];
      }
    }
  }
}

- (void)unregisterInterestWithNSString:(NSString *)user {
}

- (void)copyAllFieldsTo:(ComSparsewareBellavistaExternalaCommunicationHandler *)other {
  [super copyAllFieldsTo:other];
  other->listenerMap_ = listenerMap_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "changeLocalUserStatusWithNSString:withComSparsewareBellavistaExternalaCommunicationHandler_UserStatus:", NULL, "V", 0x401, NULL },
    { "getUserStatusWithNSString:", NULL, "LComSparsewareBellavistaExternalaCommunicationHandler_UserStatus", 0x401, NULL },
    { "isAudioChatAvailable", NULL, "Z", 0x401, NULL },
    { "isTextChatAvailable", NULL, "Z", 0x401, NULL },
    { "isVideoChatAvailable", NULL, "Z", 0x401, NULL },
    { "addStatusListenerWithNSString:withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:", NULL, "V", 0x4, NULL },
    { "notifyListenersWithJavaUtilMap:", NULL, "V", 0x4, NULL },
    { "notifyOfServiceAvailabilityChange", NULL, "V", 0x4, NULL },
    { "registerInterestWithNSString:withBoolean:", NULL, "V", 0x4, NULL },
    { "removeStatusListenerWithNSString:withComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener:", NULL, "V", 0x4, NULL },
    { "unregisterInterestWithNSString:", NULL, "V", 0x4, NULL },
  };
  static J2ObjcFieldInfo fields[] = {
    { "listenerMap_", NULL, 0x4, "LJavaUtilMap" },
  };
  static J2ObjcClassInfo _ComSparsewareBellavistaExternalaCommunicationHandler = { "aCommunicationHandler", "com.sparseware.bellavista.external", NULL, 0x401, 11, methods, 1, fields, 0, NULL};
  return &_ComSparsewareBellavistaExternalaCommunicationHandler;
}

@end

@interface ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener : NSObject
@end

@implementation ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { "serviceAvailbilityChangedWithComSparsewareBellavistaExternalaCommunicationHandler:", NULL, "V", 0x401, NULL },
    { "statusChangedWithComSparsewareBellavistaExternalaCommunicationHandler:withNSString:withComSparsewareBellavistaExternalaCommunicationHandler_UserStatus:", NULL, "V", 0x401, NULL },
  };
  static J2ObjcClassInfo _ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener = { "iStatusListener", "com.sparseware.bellavista.external", "aCommunicationHandler", 0x201, 2, methods, 0, NULL, 0, NULL};
  return &_ComSparsewareBellavistaExternalaCommunicationHandler_iStatusListener;
}

@end

static ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_ONLINE;
static ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_OFFLINE;
static ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_AWAY;
static ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_BUSY;
IOSObjectArray *ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_values;

@implementation ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum

+ (ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *)ONLINE {
  return ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_ONLINE;
}
+ (ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *)OFFLINE {
  return ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_OFFLINE;
}
+ (ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *)AWAY {
  return ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_AWAY;
}
+ (ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *)BUSY {
  return ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_BUSY;
}

- (id)copyWithZone:(NSZone *)zone {
  return self;
}

- (id)initWithNSString:(NSString *)__name withInt:(int)__ordinal {
  return [super initWithNSString:__name withInt:__ordinal];
}

+ (void)initialize {
  if (self == [ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum class]) {
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_ONLINE = [[ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum alloc] initWithNSString:@"ONLINE" withInt:0];
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_OFFLINE = [[ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum alloc] initWithNSString:@"OFFLINE" withInt:1];
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_AWAY = [[ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum alloc] initWithNSString:@"AWAY" withInt:2];
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_BUSY = [[ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum alloc] initWithNSString:@"BUSY" withInt:3];
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_values = [[IOSObjectArray alloc] initWithObjects:(id[]){ ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_ONLINE, ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_OFFLINE, ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_AWAY, ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_BUSY, nil } count:4 type:[IOSClass classWithClass:[ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum class]]];
  }
}

+ (IOSObjectArray *)values {
  return [IOSObjectArray arrayWithArray:ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_values];
}

+ (ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *)valueOfWithNSString:(NSString *)name {
  for (int i = 0; i < [ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_values count]; i++) {
    ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum *e = ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum_values->buffer_[i];
    if ([name isEqual:[e name]]) {
      return e;
    }
  }
  @throw [[JavaLangIllegalArgumentException alloc] initWithNSString:name];
  return nil;
}

+ (J2ObjcClassInfo *)__metadata {
  static const char *superclass_type_args[] = {"LComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum"};
  static J2ObjcClassInfo _ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum = { "Status", "com.sparseware.bellavista.external", "aCommunicationHandler", 0x4019, 0, NULL, 0, NULL, 1, superclass_type_args};
  return &_ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum;
}

@end
@implementation ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus

- (id)init {
  if (self = [super init]) {
    videoChat_ = [ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum OFFLINE];
    audioChat_ = [ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum OFFLINE];
    textChat_ = [ComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum OFFLINE];
  }
  return self;
}

- (void)copyAllFieldsTo:(ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus *)other {
  [super copyAllFieldsTo:other];
  other->audioChat_ = audioChat_;
  other->textChat_ = textChat_;
  other->videoChat_ = videoChat_;
}

+ (J2ObjcClassInfo *)__metadata {
  static J2ObjcFieldInfo fields[] = {
    { "videoChat_", NULL, 0x1, "LComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum" },
    { "audioChat_", NULL, 0x1, "LComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum" },
    { "textChat_", NULL, 0x1, "LComSparsewareBellavistaExternalaCommunicationHandler_StatusEnum" },
  };
  static J2ObjcClassInfo _ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus = { "UserStatus", "com.sparseware.bellavista.external", "aCommunicationHandler", 0x9, 0, NULL, 3, fields, 0, NULL};
  return &_ComSparsewareBellavistaExternalaCommunicationHandler_UserStatus;
}

@end
